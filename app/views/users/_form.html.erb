<%= form_with model: user, url: user_path() do |form| %>
  <div class="mb-3">
    <%= form.label :name, class: "form-label" %>
    <%= form.text_field :name, class: "form-control", placeholder: "Your Name Here" %>
    <% @user.errors.full_messages_for(:name).each do |message| %>
      <div><%= message %></div>
    <% end %>
  </div>
  <div class="mb-3">
    <% if user.image.attached? %>
      <div class="mb-3 profile_image">
        <%= image_tag user.image.variant(resize_to_limit: [100, 100]) %>
      </div>
    <% end %>
    
    <%= form.label :image, "Profile picture", class: "form-label" %>
    <%= form.file_field :image, class: "form-control", accept: "image/png, image/jpeg" %>
    <% @user.errors.full_messages_for(:image).each do |message| %>
      <div><%= message %></div>
    <% end %>
  </div>
  <div class="mb-3">
    <%= form.label :description, class: "form-label" %>
    <%= form.text_field :description, class: "form-control", placeholder: "Your Description Here" %>
    <% @user.errors.full_messages_for(:description).each do |message| %>
      <div><%= message %></div>
    <% end %>
  </div>
  <div class="mb-3" id="div_social">Social Media:
    <% index = 0 %>
      <div id="social_fields">
      <%= form.fields_for :socials do |socials_form| %>
        <fieldset id="<%= "#{index}" %>">
          <% index += 1 %>
          <%= render 'add_social', social: socials_form %>
        </fieldset>
      <% end %>
      </div>
    <button type="button" id="add_social">Add New Social Media</button>
  </div>
  <div>
    <%= form.submit "Send", class: "btn btn-primary" %>
  </div>
<% end %>